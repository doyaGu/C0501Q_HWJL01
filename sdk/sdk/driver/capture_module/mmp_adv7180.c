#include "iic/mmp_iic.h"
#include "capture_module/adv7180.h"
#include "capture_module/mmp_adv7180.h"

//=============================================================================
//                Constant Definition
//=============================================================================

//=============================================================================
//                Macro Definition
//=============================================================================

//=============================================================================
//                Structure Definition
//=============================================================================

//=============================================================================
//                Global Data Definition
//=============================================================================

//=============================================================================
//                Private Function Definition
//=============================================================================

//=============================================================================
//                Public Function Definition
//=============================================================================
//=============================================================================
/**
 * Device initialization.
 */
//=============================================================================
MMP_BOOL
mmpADV7180Initialize(
    void)
{
    ADV7180Initial(ADV7180_INPUT_CVBS);
}

//=============================================================================
/**
 * Device Terminate
 */
//=============================================================================
void
mmpADV7180Terminate(
    void)
{

}

//=============================================================================
/**
 * Device Output Pin Tri-State.
 */
//=============================================================================
void
mmpADV7180OutputPinTriState(
    MMP_BOOL flag)
{
    if (flag == MMP_TRUE)
        Set_ADV7180_Tri_State_Enable();
    else
        Set_ADV7180_Tri_State_Disable();
}

//=============================================================================
/**
 * Device Signal State.
 */
//=============================================================================
MMP_BOOL
mmpADV7180IsSignalStable(
    void)
{
    MMP_BOOL isStable;

    isStable = ADV7180_IsStable();

    return isStable;
}

//=============================================================================
/**
 * Device property.
 */
//=============================================================================
uint32_t
mmpADV7180GetProperty(
    MMP_ADV7180_PROPERTY property)
{
    uint32_t value;

    Get_Auto_Detection_Result();

    switch (property)
    {
    case ADV7180_HEIGHT:
        value = ADV7180_InHeight;
        printf("ADV7180_InHeight = %d\n", ADV7180_InHeight);
        break;

    case ADV7180_WIDTH:
        value = ADV7180_InWidth;
        printf("ADV7180_InWidth = %d\n", ADV7180_InWidth);
        break;

    case ADV7180_FRAMERATE:
        value = ADV7180_InFrameRate;
        printf("ADV7180_InFrameRate = %d\n", ADV7180_InFrameRate);
        break;

    case ADV7180_IS_INTERLACE:
        value = 1;
        break;

    default:
        break;
    }

    return value;
}

//=============================================================================
/**
 * Device power down.
 */
//=============================================================================
MMP_BOOL
mmpADV7180PowerDown(
    MMP_BOOL enable)
{
    ADV7180_PowerDown(enable);
}