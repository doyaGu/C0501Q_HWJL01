#include <unistd.h>
#include "iic/mmp_iic.h"
#include "CS8556.h" 

//=============================================================================
//                Constant Definition
//=============================================================================

#if 0  //this is PAL script.
0xBF,0x06,0x7F,0x00,0xFE,0x00,0xA4,0x06,0x00,0x00,0x00,0x00,0xFF,0x01,0x4E,0x01,
0x70,0x02,0x02,0x00,0x16,0x00,0x36,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
#endif

#if 0  //this is NTSC script.
0xB3,0x06,0x44,0x00,0x00,0x01,0xA4,0x06,0x00,0x00,0x00,0x00,0x27,0x06,0x0F,0x01,
0x0C,0x02,0x02,0x00,0x08,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
#endif

unsigned char IputPAL_CVBS_output_CVBSPAL_ofset00[] = 
{
0x01,0x80,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x05,0x00,0x05,0x00,
0x21,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x5F,0x03,0x17,0x00,0x2F,0x00,0x28,0x03,0x00,0x00,0x00,0xD0,0x00,0x00,0x00,0x00,
0x6E,0x02,0x02,0x00,0x1C,0x00,0x41,0x02,0x00,0x00,0x0F,0x00,0x0A,0x00,0x13,0x00,
0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xBF,0x06,0x7F,0x00,0xFE,0x00,0xA4,0x06,0x00,0x00,0x06,0x11,0xFF,0x01,/*0x4E*/0x46,0x01,
0x70,0x02,0x02,0x00,0x16,0x00,0x36,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x04,0x01,0x18,0x0D,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xFF,0xFF,0x00,0x00,0xFF,0xFF,0x00,0x00,0x80,0x80,0x00,0x00,0x80,0x80,0x00,0x00,
0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0x80,0x00,0x80,0x00,0x80,0x00,0x80,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x01,0x03,0x00,0x01,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x88,0x1C,0x01,
};

unsigned char IputPAL_CVBS_output_CVBSPAL_ofset01[] = 
{
0x80,0x10,0x80,0x00,0x00,0x00,0x99,0x11,0x2A,0x00,0x70,0x30,0x2A,0x71,0x9C,0x00,
0x10,0x2A,0x05,0x02,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0x00,
0x21,0x01,0x98,0x08,0xCC,0x00,0x4C,0x08,0x00,0x00,0x00,0x00,0x40,0x00,0x20,0x00,
0x00,0x01,0xEE,0x02,0x3A,0x07,0x65,0x04,0x14,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x06,0x40,0x07,0x30,0x15,0x10,0x31,0x02,0x33,0x12,0x34,0x52,0x38,0x42,0x39,0x62,
0x48,0x12,0x64,0x04,0x66,0x14,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,
0x7E,0x10,0x00,0xF4,0x10,0x76,0x08,0x00,0x8A,0x00,0xA0,0x11,0xA0,0xA0,0x81,0x00,
0x03,0x00,0x89,0x45,0x01,0x45,0x00,0x00,0x03,0x00,0x00,0x10,0x00,0x00,0x00,0x00,
0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};


unsigned char PAL_576P_CVBS_576I_ofset00[]=
{
0x01,0x80,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x02,0x02,0x00,0x00,0x00,0x00,
0x21,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x5F,0x03,0x40,0x00,0x78,0x00,0x48,0x03,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,
0x70,0x02,0x05,0x00,0x23,0x00,0x62,0x02,0x00,0x00,0x78,0x00,0x23,0x00,0x17,0x00,
0x12,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xBF,0x06,0x7F,0x00,0x05,0x01,0xA5,0x06,0x00,0x00,0x05,0x10,0x1F,0x02,0x3F,0x01,
0x70,0x02,0x05,0x00,0x16,0x00,0x36,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x84,0x01,0x10,0x0D,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xFF,0xFF,0x00,0x00,0xFF,0xFF,0x00,0x00,0x80,0x80,0x00,0x00,0x80,0x80,0x00,0x00,
0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0x80,0x00,0x80,0x00,0x80,0x00,0x80,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x01,0x03,0x00,0x01,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x60,0x00,0xE0,0x02,0x10,0x00,0xF0,0x01,0x00,0x00,0x00,0x00,0x00,0x85,0x3B,0x01,
};

unsigned char CCIR656P_for_cvbs_ofs00[]=
{
0x0F,0x80,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x01,0x00,0x00,0x01,
0x3D,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xBF,0x06,0x7F,0x00,0xFE,0x00,0xA4,0x06,0x00,0x00,0x00,0x0A,0x00,0x00,0x00,0x00,
0x70,0x02,0x02,0x00,0x16,0x00,0x36,0x01,0x00,0x00,0xFE,0x00,0x16,0x00,0x37,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0X00,0x00,0x00,0x00,0x00,0x00,

//0xBF,0x06,0x7F,0x00,0xFE,0x00,0xA4,0x06,0x00,0x00,/*0x00*/0x06,/*0x00*/0x11,0xFF,0x01,0x4E,0x01,
//0x70,0x02,0x02,0x00,0x16,0x00,0x36,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xAF,0x04,0x30,0x00,0x00,0x01,0x20,0x04,0x4F,0xE6,0x00,0x10,0xC5,0x00,0x8D,0x02,
0xA2,0x02,0x02,0x00,0x20,0x00,0x86,0x02,0x01,0xED,0x00,0x00,0x00,0x00,0x00,0x00,
0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x88,0x01,0x10,0x0D,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xFF,0xFF,0x00,0x00,0xFF,0xFF,0x00,0x00,0x80,0x80,0x00,0x00,0x80,0x80,0x00,0x00,
0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0x80,0x00,0x80,0x00,0x80,0x00,0x80,0x00,
0x02,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x01,0x05,0x00,0x01,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x60,0x00,0xE0,0x02,0x10,0x00,0xF0,0x01,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

};

unsigned char CCIR656P_for_cvbs_ofs01[]=
{
0x80,0x10,0x80,0x00,0x00,0x00,0x99,0x11,0x2A,0x00,0x70,0x30,0x2A,0x71,0x9C,0x00,
0x10,0x2A,0x05,0x02,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0x00,
0x21,0x01,0x98,0x08,0xCC,0x00,0x4C,0x08,0x00,0x00,0x00,0x00,0x40,0x00,0x20,0x00,
0x00,0x01,0xEE,0x02,0x3A,0x07,0x65,0x04,0x14,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x06,0x40,0x07,0x30,0x15,0x10,0x31,0x02,0x33,0x12,0x34,0x52,0x38,0x42,0x39,0x62,
0x48,0x12,0x64,0x04,0x66,0x14,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,
0x7E,0x10,0x00,0xF4,0x10,0x76,0x08,0x00,0x8A,0x00,0xFF,0x11,0xFF,0xFF,0x81,0x00,
0x03,0x00,0x89,0x45,0x01,0x45,0x00,0x00,0x03,0x00,0x00,0x10,0x00,0x00,0x00,0x00,
0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};

unsigned char Testgen_CVBS_Offset3[]=
{
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xB3,0x06,0x44,0x00,0x00,0x01,0xA4,0x06,0x00,0x00,0x00,0x00,0x27,0x06,0x0F,0x01,
0x0C,0x02,0x02,0x00,0x08,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};

unsigned char NTSC_RGB565_720x480_CVBS_Offset0[]=
{
#if 1
0x01,0x80,0x00,0x00,0x80,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0x02,0x00,
0x21,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x5F,0x03,0x40,0x00,0x78,0x00,0x48,0x03,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,
0x70,0x02,0x05,0x00,0x23,0x00,0x62,0x02,0x00,0x00,0x78,0x00,0x23,0x00,0x17,0x00,
0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xBF,0x06,0x7F,0x00,0xFE,0x00,0xA4,0x06,0x00,0x00,0x05,0x00,0xFF,0x01,0x4E,0x01,
0x70,0x02,0x02,0x00,0x16,0x00,0x36,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x04,0x01,0x18,0x0D,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xFF,0xFF,0x00,0x00,0xFF,0xFF,0x00,0x00,0x80,0x80,0x00,0x00,0x80,0x80,0x00,0x00,
0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0x80,0x00,0x80,0x00,0x80,0x00,0x80,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x01,0x03,0x00,0x01,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x01,0x1E,0x01,
#else

0x01,0x80,0x00,0x00,0x80,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x02,0x00,0x02,0x00,
0x21,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x21,0x03,0x4F,0x00,0x7E,0x00,0x4F,0x03,0x00,0x00,0x00,0xD0,0x00,0x00,0x02,0x02,
0x0C,0x02,0x03,0x00,0x06,0x00,0xEF,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xB3,0x06,0x44,0x00,0x00,0x01,0xA4,0x06,0x00,0x00,0x04,0x10,0x27,0x06,0x0F,0x01,
0x0C,0x02,0x02,0x00,0x08,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x04,0x01,0x18,0x0D,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xFF,0xFF,0x00,0x00,0xFF,0xFF,0x00,0x00,0x80,0x80,0x00,0x00,0x80,0x80,0x00,0x00,
0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0x80,0x00,0x80,0x00,0x80,0x00,0x80,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x01,0x03,0x00,0x01,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x01,0x1E,0x01,
#endif
};
//0xBF,0x06,0x7F,0x00,0x05,0x01,0xA5,0x06,0x00,0x00,0x05,0x10,0x1F,0x02,0x3F,0x01,
//0x70,0x02,0x05,0x00,0x16,0x00,0x36,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

unsigned char NTSC_RGB565_720x480_CVBS_Offset1[]=
{
0x80,0x10,0x80,0x00,0x00,0x00,0x99,0x11,0x2A,0x00,0x70,0x30,0x2A,0x71,0x9C,0x00,
0x10,0x2A,0x00,0x80,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0x00,
0x01,0x00,0x98,0x08,0xCC,0x00,0x4C,0x08,0x00,0x00,0x00,0x00,0x40,0x00,0x20,0x00,
0x00,0x01,0xEE,0x02,0x3A,0x07,0x65,0x04,0x14,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x06,0x40,0x07,0x30,0x15,0x10,0x31,0x02,0x33,0x12,0x34,0x52,0x38,0x42,0x39,0x62,
0x48,0x12,0x64,0x04,0x66,0x14,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,
0x7E,0x10,0x00,0xF4,0x10,0x76,0x08,0x00,0x8A,0x00,0xFF,0x11,0xFF,0xFF,0x81,0x00,
0x03,0x00,0x89,0x45,0x01,0x45,0x00,0x00,0x03,0x00,0x00,0x10,0x00,0x00,0x00,0x00,
0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};


unsigned char NTSC_RGB565_720x480_test_CVBS_Offset0[]=
{
0x0F,0x80,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x02,0x00,0x02,0x00,
0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xE0,0x03,0x48,0x00,0x48,0x00,0xC8,0x03,0x00,0xD9,0x00,0x10,0x00,0x00,0x02,0x00,
0xFF,0x01,0x00,0x00,0x00,0x00,0xE9,0x01,0x00,0x09,0xA9,0x00,0x0A,0x00,0x16,0x00,
0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xB3,0x06,0x7F,0x00,0x83,0x00,0x6F,0x06,0x00,0x00,0x45,0x10,0xC5,0x04,0x0B,0x01,
0x0C,0x02,0x01,0x01,0x0E,0x00,0x09,0x01,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x04,0x01,0x18,0x0D,0x00,0x00,0x00,0x86,0x00,0x00,0x00,0x00,0x00,0x91,0xF0,0x21,
0xFF,0xFF,0x00,0x00,0xFF,0xFF,0x00,0x00,0x80,0x80,0x00,0x00,0x80,0x80,0x00,0x00,
0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0x80,0x00,0x80,0x00,0x80,0x00,0x80,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x01,0x03,0x00,0x01,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x60,0x00,0xA0,0x06,0x0B,0x18,0x07,0x01,0xF0,0x00,0x00,0x00,0x00,0x00,0x1C,0x01,
};

unsigned char NTSC_RGB565_720x480_test_CVBS_Offset1[]=
{
0x80,0x10,0x80,0x00,0x00,0x00,0x99,0x11,0x2A,0x00,0x70,0x30,0x2A,0x71,0x9C,0x00,
0x10,0x2A,0x05,0x80,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0x00,
0x21,0x21,0x98,0x08,0xCC,0x00,0x4C,0x08,0x00,0x00,0x00,0x00,0x40,0x00,0x20,0x00,
0x00,0x01,0xEE,0x02,0x3A,0x07,0x65,0x04,0x14,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x06,0x40,0x07,0x30,0x15,0x10,0x31,0x02,0x33,0x12,0x34,0x52,0x38,0x42,0x39,0x62,
0x48,0x12,0x64,0x04,0x66,0x14,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,
0x7E,0x10,0x00,0xF4,0x10,0x76,0x08,0x00,0x8A,0x00,0xA0,0x11,0xA0,0xA0,0x81,0x00,
0x03,0x00,0x89,0x45,0x01,0x45,0x00,0x00,0x03,0x00,0x00,0x10,0x00,0x00,0x00,0x00,
0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};



unsigned char NTSC_RGB888_720x480_CVBS_Offset0[]=
{
0x01,0x80,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x05,0x00,0x05,0x00,
0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x59,0x03,0x13,0x00,0x18,0x00,0x4F,0x03,0x00,0x00,0x00,0xD0,0x00,0x00,0x02,0x02,
0x0C,0x02,0x03,0x00,0x06,0x00,0xEF,0x01,0x00,0x00,0x0F,0x00,0x09,0x00,0x12,0x00,
0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xB3,0x06,0x44,0x00,0x00,0x01,0xA4,0x06,0x00,0x00,0x05,0x10,0x27,0x06,0x0F,0x01,
0x0C,0x02,0x02,0x00,0x08,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x04,0x01,0x18,0x0D,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xFF,0xFF,0x00,0x00,0xFF,0xFF,0x00,0x00,0x80,0x80,0x00,0x00,0x80,0x80,0x00,0x00,
0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,
0xFF,0x00,0xFF,0x00,0xFF,0x00,0xFF,0x00,0x80,0x00,0x80,0x00,0x80,0x00,0x80,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x01,0x01,0x03,0x00,0x01,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x01,0x1E,0x01,
};

unsigned char NTSC_RGB888_720x480_CVBS_Offset1[]=
{
0x80,0x10,0x80,0x00,0x00,0x00,0x99,0x11,0x2A,0x00,0x70,0x30,0x2A,0x71,0x9C,0x00,
0x10,0x2A,0x05,0x02,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0x00,
0x21,0x01,0x98,0x08,0xCC,0x00,0x4C,0x08,0x00,0x00,0x00,0x00,0x40,0x00,0x20,0x00,
0x00,0x01,0xEE,0x02,0x3A,0x07,0x65,0x04,0x14,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x06,0x40,0x07,0x30,0x15,0x10,0x31,0x02,0x33,0x12,0x34,0x52,0x38,0x42,0x39,0x62,
0x48,0x12,0x64,0x04,0x66,0x14,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,0x00,0x10,
0x7E,0x10,0x00,0xF4,0x10,0x76,0x08,0x00,0x8A,0x00,0xA0,0x11,0xA0,0xA0,0x81,0x00,
0x03,0x00,0x89,0x45,0x01,0x45,0x00,0x00,0x03,0x00,0x00,0x10,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};


static uint8_t CS8556_IICADDR = 0x7A >> 1; 

//=============================================================================
//                Private Function Definition
//=============================================================================

static uint8_t _CS8556_ReadI2c_Byte(uint16_t RegAddr)
{
    uint8_t data;
    uint8_t flag;
    uint8_t rbuf[1];
    uint8_t wBuf[2];

    wBuf[0] = (RegAddr & 0xFF00)>>8;
    wBuf[1] = (RegAddr & 0x00FF);


    //mmpIicLockModule();  
    printf("wBuf[0]=0x%x ,wBuf[1]=0x%x\n",wBuf[0],wBuf[1]);
    if (0 != (flag = mmpIicReceiveDataEx(IIC_MASTER_MODE, CS8556_IICADDR,wBuf,2,rbuf, 1)))
    {
        printf("0 CS8556 I2C Read error, reg = %02x\n", RegAddr);
    }else
    {
        //printf("CS8556 I2C Read OK , reg = 0x%x ,rbuf[0] = 0x%x\n",RegAddr , rbuf[0]);
    }
    //mmpIicReleaseModule();

    data = rbuf[0];
    return data;
}

static uint8_t _CS8556_WriteI2c_Byte(uint16_t RegAddr, uint8_t data)
{
    uint16_t flag;
    uint8_t CmdBuf[3];

    CmdBuf[0] = (RegAddr & 0xFF00)>>8;
    CmdBuf[1] = (RegAddr & 0x00FF);
    CmdBuf[2] = (data);

    //mmpIicLockModule();  
    if( 0 != (flag = mmpIicSendDataEx(IIC_MASTER_MODE,CS8556_IICADDR,CmdBuf,3)))
    {
        printf("1 CS8556 I2c write error, reg = %02x val =%02x\n", RegAddr, data);
    }else
    {
        printf("CS8556 I2C write OK!\n");
    }
    //mmpIicReleaseModule();

    return flag;
}

static uint8_t _CS8556_MultiPageWriteI2c_Byte(unsigned char RegOffset,unsigned char RegAddr, unsigned int number,unsigned char *value)
{
    uint16_t flag;
    uint8_t CmdBuf[3];
    uint8_t *pbuf=NULL;


    pbuf = (uint8_t*)malloc(number+2);

    *pbuf = RegOffset;
    *(pbuf +1) = RegAddr;

    memcpy(pbuf + 2 , value ,number);

    printf("pbuf[0]= 0x%x , pbuf[2]= 0x%x , pbuf[3] = 0x%x , pbuf[4]=0x%x\n",pbuf[0],pbuf[1], pbuf[2], pbuf[3] , pbuf[4]);

    //mmpIicLockModule();  
    if( 0 != (flag = mmpIicSendDataEx(IIC_MASTER_MODE,CS8556_IICADDR,pbuf, number+2 )))
    {
        printf("1 CS8556 I2c write error, reg = %02x\n", RegAddr);
    }else
    {
        printf("CS8556 I2C write OK!\n");
    }
    //mmpIicReleaseModule();
    if(pbuf)
    {
        free(pbuf);
    }

    return flag;
}

void _CS8556_SetOutputChannel(unsigned char channel)
{
	unsigned char temp;

	temp=_CS8556_ReadI2c_Byte(REG_00_05);
    printf("0 temp=0x%x\n",temp);
	temp=(temp&0xFC)|channel;
	_CS8556_WriteI2c_Byte(REG_00_05,temp);
    printf("1 temp=0x%x\n",temp);
/*	
	channel:			output mode

	bit1	bit0
	0		0			CVBS + D_Sub/SDTV/HDTV
	0		1			Svideo + Svideo
	1		0			4 * CVBS
	1		1			2 * CVBS + Svideo

*/

}


void CS8556Initial(void)
{
    uint16_t result;
    uint16_t CMD_Data;
    uint8_t U_Data;
    uint32_t W_Data;

    uint8_t rbuf[1];
    uint8_t wBuf[2];
    uint8_t CmdBuf[3];


    usleep(1000 * 10);
    _CS8556_MultiPageWriteI2c_Byte(0x00,0x00,256,&IputPAL_CVBS_output_CVBSPAL_ofset00[0]);
    _CS8556_MultiPageWriteI2c_Byte(0x01,0x00,256,&IputPAL_CVBS_output_CVBSPAL_ofset01[0]);	
    {
        //_CS8556_MultiPageWriteI2c_Byte(0x00,0x00,256,&NTSC_RGB565_720x480_CVBS_Offset0[0]);		
        //_CS8556_MultiPageWriteI2c_Byte(0x01,0x00,256,&NTSC_RGB565_720x480_CVBS_Offset1[0]);		
        //_CS8556_MultiPageWriteI2c_Byte(0x00,0x00,256,&CCIR656P_for_cvbs_ofs00[0]);	
        //_CS8556_MultiPageWriteI2c_Byte(0x01,0x00,256,&CCIR656P_for_cvbs_ofs01[0]);		

        _CS8556_SetOutputChannel(0x00);		

        usleep(1000 * 1000 * 3);
        printf("should get the image\n");
    }

}

